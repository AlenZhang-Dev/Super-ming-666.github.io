<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"superming.life","root":"/","images":"/images","scheme":"Mist","version":"8.2.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}};
  </script>
<meta name="description" content="QuickSort概念及简介快速排序是经典的排序算法，一般来说，快速排序是排序的最佳选择，得益于其出众的平均性能，同时能够就地排序，在虚拟环境中能够很好的工作。 快速排序主要基于分治模式（divide - and - conquer）。首先对数组进行划分【分解】，通过partition函数进行划分，最后将各操作合并即可。">
<meta property="og:type" content="article">
<meta property="og:title" content="QuickSort">
<meta property="og:url" content="https://superming.life/2020/10/07/QuickSort/index.html">
<meta property="og:site_name" content="AlenZhang&#39;s Blog">
<meta property="og:description" content="QuickSort概念及简介快速排序是经典的排序算法，一般来说，快速排序是排序的最佳选择，得益于其出众的平均性能，同时能够就地排序，在虚拟环境中能够很好的工作。 快速排序主要基于分治模式（divide - and - conquer）。首先对数组进行划分【分解】，通过partition函数进行划分，最后将各操作合并即可。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://superming.life/2020/10/07/QuickSort/quicksort.png">
<meta property="og:image" content="https://superming.life/2020/10/07/QuickSort/3-way-quicksort.png">
<meta property="article:published_time" content="2020-10-07T04:14:41.000Z">
<meta property="article:modified_time" content="2021-02-01T16:01:23.688Z">
<meta property="article:author" content="AlenZhang">
<meta property="article:tag" content="Algorithms">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://superming.life/2020/10/07/QuickSort/quicksort.png">


<link rel="canonical" href="https://superming.life/2020/10/07/QuickSort/">


<script data-pjax class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>
<title>QuickSort | AlenZhang's Blog</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="/custom_css_source.css">
<!-- hexo injector head_end end --><link rel="alternate" href="/atom.xml" title="AlenZhang's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">AlenZhang's Blog</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i>About</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#QuickSort"><span class="nav-number">1.</span> <span class="nav-text">QuickSort</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5%E5%8F%8A%E7%AE%80%E4%BB%8B"><span class="nav-number">1.1.</span> <span class="nav-text">概念及简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Partition%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.2.</span> <span class="nav-text">Partition实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Code"><span class="nav-number">1.3.</span> <span class="nav-text">Code</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-Implementation"><span class="nav-number">1.3.1.</span> <span class="nav-text">Java Implementation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-Implementation"><span class="nav-number">1.3.2.</span> <span class="nav-text">C++ Implementation</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#QuickSort%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%EF%BC%88Analysis-of-QuickSort%EF%BC%89"><span class="nav-number">1.4.</span> <span class="nav-text">QuickSort性能分析（Analysis of QuickSort）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E5%88%86%E6%B3%95-%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F%EF%BC%883-Way-QuickSort%EF%BC%89"><span class="nav-number">1.5.</span> <span class="nav-text">三分法-快速排序（3-Way-QuickSort）</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="AlenZhang"
      src="/images/ninja8.jpg">
  <p class="site-author-name" itemprop="name">AlenZhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:supermingzero@gmail.com" title="E-Mail → mailto:supermingzero@gmail.com" rel="noopener" target="_blank"><i class="far fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/AlenZhang-Dev" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;AlenZhang-Dev" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.instagram.com/alen_zhang_bubble/" title="Instagram → https:&#x2F;&#x2F;www.instagram.com&#x2F;alen_zhang_bubble&#x2F;" rel="noopener" target="_blank"><i class="fab fa-instagram fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/t.me/AlenZhang" title="Telegram → t.me&#x2F;AlenZhang"><i class="fab fa-telegram fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://superming.life/2020/10/07/QuickSort/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ninja8.jpg">
      <meta itemprop="name" content="AlenZhang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AlenZhang's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          QuickSort
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2020-10-07 12:14:41" itemprop="dateCreated datePublished" datetime="2020-10-07T12:14:41+08:00">2020-10-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CS/" itemprop="url" rel="index"><span itemprop="name">CS</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Symbols count in article">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">Symbols count in article: </span>
      <span>5.6k</span>
    </span>
    <span class="post-meta-item" title="Reading time">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">Reading time &asymp;</span>
      <span>5 mins.</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="QuickSort"><a href="#QuickSort" class="headerlink" title="QuickSort"></a>QuickSort</h1><h2 id="概念及简介"><a href="#概念及简介" class="headerlink" title="概念及简介"></a>概念及简介</h2><p>快速排序是经典的排序算法，一般来说，快速排序是排序的最佳选择，得益于其出众的平均性能，同时能够就地排序，在虚拟环境中能够很好的工作。</p>
<p>快速排序主要基于<strong>分治模式（divide - and - conquer）</strong>。首先对数组进行划分【分解】，通过partition函数进行划分，最后将各操作合并即可。</p>
<a id="more"></a>
<blockquote>
<p>关于分治算法的策略，分(divide)主要把大问题分解为模式类似的小问题，方便进行递归，而治（conquer）则将分阶段的各答案合并在一起，故称分治。</p>
</blockquote>
<h2 id="Partition实现"><a href="#Partition实现" class="headerlink" title="Partition实现"></a>Partition实现</h2><p>Partition函数是QuickSort很重要的组成。<u>首先从给定数组中选择一个pivot值【中枢值】，关于中枢值的选择比较随意，可以为首元素、尾元素、中间元素以及随机元素，一般默认为首或尾元素。</u>Partition函数的主要功能是在数组中选择一个中枢值，把该值放在排序后属于它的位置，所有比它小的数值放在该值的左侧，所有比它大的值放在它的右侧。</p>
<p><img src="/2020/10/07/QuickSort/quicksort.png" alt="quicksort"></p>
<p>Partition函数的<strong>伪代码</strong>实现【Pseudo Code】：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*This fucntion takes last element as pivot.</span></span><br><span class="line"><span class="comment">will place the pivot element at the correct position.</span></span><br><span class="line"><span class="comment">and place all smaller to left of pivot, all greater element to right of pivot.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">partition(arr[], low, high)&#123;</span><br><span class="line">    pivot = arr[high];</span><br><span class="line">    i = low - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = low; j &lt; high - <span class="number">1</span>; j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[j] &lt; pivot)&#123;</span><br><span class="line">            i++;</span><br><span class="line">            swap arr[i] and arr[j]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    swap arr[i + <span class="number">1</span>] and arr[high]</span><br><span class="line">    <span class="keyword">return</span> (i + <span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*This function takes first element as pivot.</span></span><br><span class="line"><span class="comment">will place the pivot element at the correct position.</span></span><br><span class="line"><span class="comment">and place all smaller to left of pivot, all greater element to right of pivot.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">partition(arr[], low, high)&#123;</span><br><span class="line">    pivot = arr[low];</span><br><span class="line">    i = low;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = low; j &lt;= high; j++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[j] &lt; pivot)&#123;</span><br><span class="line">            i++;</span><br><span class="line">            swap arr[i] and arr[j]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    swap arr[low] and arr[i]</span><br><span class="line">    <span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p>QuickSort伪代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// low -&gt; Starting index, high -&gt; Ending index</span></span><br><span class="line">quickSort(arr[], low, high)&#123;</span><br><span class="line">    <span class="keyword">if</span>(low &lt; high)&#123;</span><br><span class="line">        pi = partition(arr, low, high);</span><br><span class="line">      	<span class="comment">//pi is on his position. Dividing the arr by pi.</span></span><br><span class="line">      	quickSort(arr, low, pi - <span class="number">1</span>);</span><br><span class="line">      	quickSort(arr, pi + <span class="number">1</span>, high);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Java-Implementation"><a href="#Java-Implementation" class="headerlink" title="Java Implementation"></a>Java Implementation</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span></span>&#123;</span><br><span class="line">  	<span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span>&#123;</span><br><span class="line">      	<span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">      	<span class="keyword">int</span> pivot = arr[high];</span><br><span class="line">      	<span class="keyword">int</span> i = low - <span class="number">1</span>;</span><br><span class="line">      	<span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt; high - <span class="number">1</span>; j++)&#123;</span><br><span class="line">          	<span class="keyword">if</span>(arr[j] &lt; pivot)&#123;</span><br><span class="line">              	i++;</span><br><span class="line">          			<span class="comment">//swap</span></span><br><span class="line">          			temp = arr[j];</span><br><span class="line">          			arr[j] = arr[i];</span><br><span class="line">          			arr[i] = temp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//swap last time </span></span><br><span class="line">      	temp = arr[i++];</span><br><span class="line">      	arr[i] = arr[high];</span><br><span class="line">      	arr[high] = temp;</span><br><span class="line">      </span><br><span class="line">      	<span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span>&#123;</span><br><span class="line">      	<span class="keyword">if</span>(low &lt; high)&#123;</span><br><span class="line">          	<span class="keyword">int</span> pi = partition(arr, low, high);</span><br><span class="line">          	</span><br><span class="line">          	sort(arr, low, pi - <span class="number">1</span>);</span><br><span class="line">          	sort(arr, pi + <span class="number">1</span>, high);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  	</span><br><span class="line">  	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printArray</span><span class="params">(<span class="keyword">int</span> arr[])</span></span>&#123;</span><br><span class="line">      	<span class="keyword">int</span> n = arr.length;</span><br><span class="line">      	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i)&#123;</span><br><span class="line">          	System.out.print(arr[i] + <span class="string">&quot; &quot;</span>);</span><br><span class="line">        System.out.print();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">  	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String args[])</span></span>&#123;</span><br><span class="line">      	<span class="keyword">int</span> arr = &#123;&#125;;<span class="comment">//test example;</span></span><br><span class="line">      	<span class="keyword">int</span> n = arr.length;</span><br><span class="line">      	</span><br><span class="line">      	QuickSort ob = <span class="keyword">new</span> QuickSort();</span><br><span class="line">      	ob.sort(arr, <span class="number">0</span>, n - <span class="number">1</span>);</span><br><span class="line">      </span><br><span class="line">      	System.out.println(<span class="string">&quot;sorted array&quot;</span>);</span><br><span class="line">      	printArray(arr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="C-Implementation"><a href="#C-Implementation" class="headerlink" title="C++ Implementation"></a>C++ Implementation</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* C++ implementation of QuickSort */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt; </span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">// A utility function to swap two elements </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>* a, <span class="keyword">int</span>* b)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">  <span class="keyword">int</span> t = *a; </span><br><span class="line">  *a = *b; </span><br><span class="line">  *b = t; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* This function takes last element as pivot, places </span></span><br><span class="line"><span class="comment">the pivot element at its correct position in sorted </span></span><br><span class="line"><span class="comment">array, and places all smaller (smaller than pivot) </span></span><br><span class="line"><span class="comment">to left of pivot and all greater elements to right </span></span><br><span class="line"><span class="comment">of pivot */</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span> <span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">  <span class="keyword">int</span> pivot = arr[high]; <span class="comment">// pivot </span></span><br><span class="line">  <span class="keyword">int</span> i = (low - <span class="number">1</span>); <span class="comment">// Index of smaller element </span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> j = low; j &lt;= high - <span class="number">1</span>; j++) </span><br><span class="line">  &#123; </span><br><span class="line">    <span class="comment">// If current element is smaller than the pivot </span></span><br><span class="line">    <span class="keyword">if</span> (arr[j] &lt; pivot) </span><br><span class="line">    &#123; </span><br><span class="line">      i++; <span class="comment">// increment index of smaller element </span></span><br><span class="line">      swap(&amp;arr[i], &amp;arr[j]); </span><br><span class="line">    &#125; </span><br><span class="line">  &#125; </span><br><span class="line">  swap(&amp;arr[i + <span class="number">1</span>], &amp;arr[high]); </span><br><span class="line">  <span class="keyword">return</span> (i + <span class="number">1</span>); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* The main function that implements QuickSort </span></span><br><span class="line"><span class="comment">arr[] --&gt; Array to be sorted, </span></span><br><span class="line"><span class="comment">low --&gt; Starting index, </span></span><br><span class="line"><span class="comment">high --&gt; Ending index */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> low, <span class="keyword">int</span> high)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">  <span class="keyword">if</span> (low &lt; high) </span><br><span class="line">  &#123; </span><br><span class="line">    <span class="comment">/* pi is partitioning index, arr[p] is now </span></span><br><span class="line"><span class="comment">		at right place */</span></span><br><span class="line">    <span class="keyword">int</span> pi = partition(arr, low, high); </span><br><span class="line"></span><br><span class="line">    <span class="comment">// Separately sort elements before </span></span><br><span class="line">    <span class="comment">// partition and after partition </span></span><br><span class="line">    quickSort(arr, low, pi - <span class="number">1</span>); </span><br><span class="line">    quickSort(arr, pi + <span class="number">1</span>, high); </span><br><span class="line">  &#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">/* Function to print an array */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printArray</span><span class="params">(<span class="keyword">int</span> arr[], <span class="keyword">int</span> size)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">  <span class="keyword">int</span> i; </span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; size; i++) </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="string">&quot; &quot;</span>; </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// Driver Code </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">  <span class="keyword">int</span> arr[] = &#123;<span class="number">10</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">1</span>, <span class="number">5</span>&#125;; </span><br><span class="line">  <span class="keyword">int</span> n = <span class="keyword">sizeof</span>(arr) / <span class="keyword">sizeof</span>(arr[<span class="number">0</span>]); </span><br><span class="line">  quickSort(arr, <span class="number">0</span>, n - <span class="number">1</span>); </span><br><span class="line">  <span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;Sorted array: \n&quot;</span>; </span><br><span class="line">  printArray(arr, n); </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// This code is contributed by rathbhupendra </span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="QuickSort性能分析（Analysis-of-QuickSort）"><a href="#QuickSort性能分析（Analysis-of-QuickSort）" class="headerlink" title="QuickSort性能分析（Analysis of QuickSort）"></a>QuickSort性能分析（Analysis of QuickSort）</h2><p>快速排序的性能可以通过如下公式进行表示： <strong>T(n) = T(k) + T(n-k-1) + $\theta$(n)</strong></p>
<p>前两个属于用于两个递归调用，最后一个术语为分区过程。k表示小于pivot的元素个数，快速排序的时间花费主要取决于输入数组以及分区策略。【最坏情况、最优情况、平均情况】</p>
<p><strong>最坏情况（Worst Case）</strong></p>
<p>当每次分区都选择了最大或者最小的值作为pivot值。</p>
<p> <strong>T(n) = T(n-1) + $\theta$ (n)</strong></p>
<p>上述快排运行时间为$\theta$(n<sup>2</sup>)。</p>
<p><strong>最佳情况（Best Case）</strong></p>
<p>每次分区都选择中间元素作为pivot值。</p>
<p> <strong>T(n) = 2T(n / 2) + $\theta$ (n)</strong></p>
<p><strong>平均情况（Average Case）</strong></p>
<p>根据复杂的运行时间分析【后续补充】，得到该算法的平均运行效率公式为：</p>
<p> <strong>T(n) = T(n / 9) + T(9n / 10) + $\theta$ (n)</strong></p>
<p>上述快排的运行时间为$\theta$(nLogn)。</p>
<p>根据以上分析，QuickSort算法在最坏情况下的运行效率不及多数的排序算法，比如归并排序(Merge Sort)、堆排序(Heap Sort)。但在实际使用中，QuickSort排序算法表现很快，主要因为算法内部的循环排序可以很高效的适用于现实生活中多数的数组结构。因为pivot值可以随机更换，故最坏的情况很少在现实生活中发生，快排基本被认为相同数量级中所有排序算法中平均性能最优秀的。但与归并排序相比，归并排序更适用于数据量大且存储在外部的数据存储模式。</p>
<p>快速排序是一个不稳定的算法，在排序后相同值的元素相对位置会发生改变。</p>
<h2 id="三分法-快速排序（3-Way-QuickSort）"><a href="#三分法-快速排序（3-Way-QuickSort）" class="headerlink" title="三分法-快速排序（3-Way-QuickSort）"></a>三分法-快速排序（3-Way-QuickSort）</h2><p>3-Way-QuickSort也叫<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Dutch_national_flag_problem">Dutch national flag problem</a>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The Dutch national flag problem (DNF) is a computer science programming problem proposed by Edsger Dijkstra.The flag of the Netherlands consists of three colors: red, white and blue. Given balls of these three colors arranged randomly in a line (the actual number of balls does not matter), the task is to arrange them such that all balls of the same color are together and their collective color groups are in the correct order.</span><br></pre></td></tr></table></figure>
<p>简单的说，即给定红、白、蓝三种颜色的小球若干，将其排成一列，是相同颜色的小球相邻，三种颜色的先后顺序为红白蓝。</p>
<p>将问题进行简单的抽象，即蓝色为pivot值，左边的红色部分小于pivot，右边的白色部分大于pivot，中间部分为pivot，此时用到三分法-快速排序，通过三个指针将数组分为四个部分，通过一次扫描即可完成排序。</p>
<p><img src="/2020/10/07/QuickSort/3-way-quicksort.png" alt="3-way"></p>
<p>核心代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">three_way_partition</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;arr, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">  	<span class="keyword">int</span> next_less_pos = <span class="number">0</span>;</span><br><span class="line">  	<span class="keyword">int</span> next_scan_pos = <span class="number">0</span>;</span><br><span class="line">  	<span class="keyword">int</span> next_bigger_pos = arr.size() - <span class="number">1</span>;</span><br><span class="line">  </span><br><span class="line">  	<span class="keyword">while</span>(arr[next_scan_pos] &lt;= target)&#123;</span><br><span class="line">      	<span class="keyword">if</span>(arr[next_scan_pos] &lt; target)</span><br><span class="line">          	swap(arr[next_scan_pos++], arr[next_less_pos++]);</span><br><span class="line">     		<span class="keyword">else</span> <span class="keyword">if</span>(arr[next_scan_pos &gt; traget)</span><br><span class="line">            swap(arr[next_scan_pos++], arr[next_bigger_pos--]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            next_scan_pos++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/quick-sort/">GG:QuickSort</a></p>
<p><a target="_blank" rel="noopener" href="https://selfboot.cn/2016/09/01/lost_partition/">被忽视的partition算法</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Dutch_national_flag_problem">Dutch national flag problem</a></p>
<p><a target="_blank" rel="noopener" href="https://wiki.jikexueyuan.com/project/easy-learn-algorithm/fast-sort.html">快速排序</a></p>

    </div>

    
    
    
      
  <div class="popular-posts-header">Related Posts</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2020/11/15/Algorithms-StacksandQueues/" rel="bookmark">Algorithms，Part I：Stacks and Queues</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2020/10/15/HeapSort/" rel="bookmark">HeapSort</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2020/10/07/MergeSort/" rel="bookmark">MergeSort</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2020/11/16/Programming Assignment Deques and Randomized Queues/" rel="bookmark">Programming Assignment:Deques and Randomized Queues</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2020/10/17/插入排序/" rel="bookmark">Insertion</a></div>
    </li>
  </ul>


    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Algorithms/" rel="tag"># Algorithms</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/10/07/MergeSort/" rel="prev" title="MergeSort">
                  <i class="fa fa-chevron-left"></i> MergeSort
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2020/09/20/Tsingtao/" rel="next" title="Tsingtao">
                  Tsingtao <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-alien"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">AlenZhang</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="Symbols count total">220k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">3:20</span>
  </span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.4.0/pjax.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '.page-configurations',
    '.main-inner',
    '.post-toc-wrap',
    '.languages',
    '.pjax'
  ],
  analytics: false,
  cacheBust: false,
  scrollRestoration: false,
  scrollTo: !CONFIG.bookmark.enable
});

document.addEventListener('pjax:success', () => {
  pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  const hasTOC = document.querySelector('.post-toc');
  document.querySelector('.sidebar-inner').classList.toggle('sidebar-nav-active', hasTOC);
  document.querySelector(hasTOC ? '.sidebar-nav-toc' : '.sidebar-nav-overview').click();
  NexT.utils.updateSidebarPosition();
});
</script>


  






  



    <div class="pjax">

  <script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'none'
      },
      options: {
        renderActions: {
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              const target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js';
    script.defer = true;
    document.head.appendChild(script);
  } else {
    MathJax.startup.document.state(0);
    MathJax.typesetClear();
    MathJax.texReset();
    MathJax.typeset();
  }
</script>



    </div>
</body>
</html>
